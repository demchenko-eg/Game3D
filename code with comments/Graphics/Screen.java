package Graphics;

import Index.Game;

/**
 * Клас Screen (Екран).
 * Цей клас керує відображенням гри. Він успадковує клас Render, тобто сам є "полотном".
 * Його задача — очищати екран перед кожним кадром та викликати методи малювання 3D-сцени.
 */
public class Screen extends Render {

    /**
     * Об'єкт Render3D.
     * Це спеціалізований рендер, який займається складною математикою (Raycasting)
     * для створення тривимірного зображення стін, підлоги та об'єктів.
     */
    private Render3D render;

    /**
     * Конструктор Screen.
     * Ініціалізує екран та створює об'єкт 3D-рендера.
     *
     * @param width  Ширина екрана.
     * @param height Висота екрана.
     */
    public Screen(int width, int height) {
        super(width, height); // Ініціалізація батьківського класу Render
        render = new Render3D(width, height); // Створення 3D-рендера з такими ж розмірами
    }

    /**
     * Метод render (Малювання кадру).
     * Це головний метод, який викликається в ігровому циклі для оновлення зображення.
     *
     * @param game Об'єкт гри (містить дані про гравця, час тощо).
     */
    public void render(Game game) {
        // 1. Очищення екрана.
        // Заповнюємо весь масив пікселів нулями (чорний колір).
        // Це потрібно, щоб прибрати зображення з попереднього кадру.
        for (int i = 0; i < width * height; i++) {
            pixels[i] = 0;
        }

        // 2. Малювання підлоги та стелі.
        render.floor(game);

        // 3. Малювання стін, ворогів та предметів (основний Raycasting).
        render.walls(game, game.level);

        // 4. Застосування ефекту відстані (затемнення об'єктів вдалині).
        render.renderDistanceLimiter();

        // 5. Копіювання готового 3D-зображення на цей екран.
        // Метод draw() (з класу Render) бере пікселі з об'єкта 'render' і переносить їх у 'pixels' цього класу.
        draw(render, 0, 0);
    }
}